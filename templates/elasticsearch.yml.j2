# {{ ansible_managed }}

# ======================== Elasticsearch Configuration =========================

# ---------------------------------- Cluster -----------------------------------
cluster.name: {{ es_cluster_name }}

# ------------------------------------ Node ------------------------------------
node.name: "{{ es_node_name }}"
node.master: {{ es_node_master | lower }}
node.data: {{ es_node_data | lower }}

# ----------------------------------- Paths ------------------------------------
path.data: {{ es_path_data }}
path.logs: {{ es_path_logs }}

# ----------------------------------- Memory -----------------------------------
{% if es_enable_mlockall %}
bootstrap.mlockall: {{ es_enable_mlockall | lower }}
{% endif %}

# ---------------------------------- Network -----------------------------------
network.host: [{% for interface in es_network_host %}"{{ interface }}"{% if not loop.last %}, {% endif %}{% endfor %}]
transport.tcp.port: {{ es_transport_port }}
http.port: {{ es_http_listen_port }}
http.max_content_length: {{ es_http_max_content_length }}mb

# --------------------------------- Discovery ----------------------------------
discovery.zen.minimum_master_nodes: {{ es_minimum_master_nodes }}
{% if es_unicast_discovery_hosts is defined %}
discovery.zen.ping.unicast.enabled: true
discovery.zen.ping.unicast.hosts: "{{ es_unicast_discovery_hosts }}"
discovery.zen.ping.multicast.enabled: false
{% else %}
discovery.zen.ping.multicast.enabled: true
discovery.zen.ping.multicast.group: {{ es_multicast_ip }}
discovery.zen.ping.multicast.port: {{ es_multicast_port }}
discovery.zen.ping.multicast.ttl: 5
{% endif %}

# ---------------------------------- Gateway -----------------------------------
gateway.recover_after_data_nodes: {{ es_recovery_nodes }}

# ---------------------------------- Index -----------------------------------
index.number_of_shards: {{ es_number_of_shards }}
index.number_of_replicas: {{ es_number_of_replicas }}

# ---------------------------------- Marvel -----------------------------------
marvel.agent.exporter.es.hosts: "localhost:{{ es_http_listen_port }}"
